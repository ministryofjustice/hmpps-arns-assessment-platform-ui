{%- from "moj/components/primary-navigation/macro.njk" import mojPrimaryNavigation -%}

{% set personName = data.caseData.name.forename if data.caseData and data.caseData.name else "Person" %}

{# Base path is the root journey - both nav items are relative to this #}
{% set basePath = '' %}
  {% for item in navigation %}
    {%  if item.title == 'Sentence Plan' %}
      {% set basePath = item.path %}
    {%  endif %}
  {% endfor %}

{# About page is a direct step; everything else is "plan" related #}
{% set isOnAboutPage = step.path == '/about-person' %}
{% set isOnPlanPage = not isOnAboutPage %}

{{ mojPrimaryNavigation({
  label: "Primary navigation",
  items: [
    {
      text: personName + "'s plan",
      href: basePath + "/plan/overview",
      active: isOnPlanPage
    },
    {
      text: "About " + personName,
      href: basePath + "/about-person",
      active: isOnAboutPage
    }
  ]
}) }}
