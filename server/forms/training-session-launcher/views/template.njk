{%- extends "partials/layout.njk" -%}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}

{% block head %}
  {{ super() }}
  {% block pageStylesheets %}
    <link rel="stylesheet" href="{{ '/assets/css/forms/training-session-launcher/assets/form.css' | assetMap }}">
  {% endblock %}
{% endblock %}

{% block header %}
  {{ super() }}
  {% set isOnBrowsePage = step.path == '/browse' %}
  {% set isOnCustomisePage = step.path == '/customise' %}
  {% set isOnSessionsPage = step.path == '/sessions' %}
  {% set isScenariosActive = isOnBrowsePage or isOnCustomisePage %}

  {{ govukServiceNavigation({
    serviceName: "Training",
    serviceUrl: "#",
    navigation: [
      {
        href: "/training-session-launcher/browse",
        text: "Scenarios",
        active: isScenariosActive
      },
      {
        href: "/training-session-launcher/sessions",
        text: "Your sessions",
        active: isOnSessionsPage
      }
    ]
  }) }}
{% endblock %}

{% block bodyEnd %}
  {{ super() }}
  {% block pageScripts %}
    <script src="{{ '/assets/js/forms/training-session-launcher/assets/form.js' | assetMap }}"></script>
  {% endblock %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% if step.backlink %}
        <a href="{{ step.backlink }}" class="govuk-back-link">Back</a>
      {% endif %}

      {% for block in blocks %}
        {{ block | safe }}
      {% endfor %}
    </div>
  </div>
{% endblock %}

{% block supportWidget %}
  {% set helpContent %}
    <h3 class="govuk-heading-s govuk-!-margin-bottom-2">Get help</h3>
    <p class="govuk-body-s govuk-!-margin-bottom-0">
      Please provide the request details shown here, along with a description of the issue you experienced.
    </p>
  {% endset %}

  {{ supportWidget({
    helpContent: helpContent,
    supportItems: [
      { label: 'Preferences ID', value: data.preferencesId }
    ] if data.preferencesId else []
  }) }}
{% endblock %}

